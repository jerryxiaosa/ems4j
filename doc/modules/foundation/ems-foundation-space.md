# ems-foundation-space 模块文档

## 1. 模块概述

`ems-foundation-space` 提供空间/区域的树形层级管理能力，支持多级空间结构。

## 2. 核心功能

| 功能 | 说明 |
|------|------|
| 空间管理 | 空间 CRUD |
| 树形结构 | 父子关系维护、树形查询 |
| 层级查询 | 祖先/后代查询、路径查询 |

## 3. Service 类说明

### 3.1 SpaceService

**主要方法：**

| 方法 | 说明 |
|------|------|
| `getDetail()` | 获取空间详情 |
| `findTree()` | 查询空间树 |
| `findChildren()` | 查询子空间 |
| `findAncestors()` | 查询祖先空间 |
| `addSpace()` | 新增空间 |
| `updateSpace()` | 更新空间 |
| `deleteSpace()` | 删除空间 |
| `moveSpace()` | 移动空间 |

## 4. 模块依赖

```
+---------------------------+
|   ems-foundation-space    |
+---------------------------+
            |
            v
+---------------------------+
| ems-components-datasource |
+---------------------------+
            |
            v
+---------------------------+
|       ems-common          |
+---------------------------+
```

## 5. Service 内部依赖

```
+-------------------------------------+
|          SpaceServiceImpl           |
+-------------------------------------+
                |
                v
        +---------------+
        | SpaceRepository|
        +---------------+
        (无外部模块依赖)
```

## 6. 数据实体

| 实体 | 说明 |
|------|------|
| `SpaceEntity` | 空间表 |

## 7. 空间类型

| 类型 | 枚举值 | 说明 |
|------|--------|------|
| 园区 | `PARK` | 顶层空间 |
| 楼栋 | `BUILDING` | 建筑物 |
| 楼层 | `FLOOR` | 楼层 |
| 房间 | `ROOM` | 最小空间单元 |

## 8. 树形结构

```
园区 (PARK)
├── 楼栋A (BUILDING)
│   ├── 1楼 (FLOOR)
│   │   ├── 101室 (ROOM)
│   │   └── 102室 (ROOM)
│   └── 2楼 (FLOOR)
│       ├── 201室 (ROOM)
│       └── 202室 (ROOM)
└── 楼栋B (BUILDING)
    └── 1楼 (FLOOR)
        └── 101室 (ROOM)
```
