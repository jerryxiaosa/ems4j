# ems-foundation-system 模块文档

## 1. 模块概述

`ems-foundation-system` 提供系统配置管理能力，支持动态配置的读写和缓存。

## 2. 核心功能

| 功能 | 说明 |
|------|------|
| 配置管理 | 配置项 CRUD |
| 配置缓存 | 基于 Guava 的本地缓存 |
| 配置查询 | 按 Key 查询、批量查询 |

## 3. Service 类说明

### 3.1 ConfigService

**主要方法：**

| 方法 | 说明 |
|------|------|
| `getConfig()` | 获取配置值 |
| `getConfigOrDefault()` | 获取配置值（带默认值） |
| `setConfig()` | 设置配置值 |
| `findList()` | 查询配置列表 |
| `refreshCache()` | 刷新缓存 |

## 4. 模块依赖

```
+---------------------------+
|   ems-foundation-system   |
+---------------------------+
            |
            v
+---------------------------+
| ems-components-datasource |
+---------------------------+
            |
            v
+---------------------------+
|       ems-common          |
+---------------------------+
```

## 5. Service 内部依赖

```
+-------------------------------------+
|         ConfigServiceImpl           |
+-------------------------------------+
                |
    +-----------+-----------+
    |                       |
    v                       v
+---------------+   +---------------+
|ConfigRepository|   | Guava Cache  |
+---------------+   +---------------+
```

## 6. 数据实体

| 实体 | 说明 |
|------|------|
| `ConfigEntity` | 配置表 |

## 7. 常用配置项

| 配置 Key | 说明 |
|----------|------|
| `DEFAULT_PRICE_PLAN_ID` | 默认电价方案 ID |
| `DEFAULT_WARN_PLAN_ID` | 默认预警方案 ID |
| `DEFAULT_SERVICE_RATE` | 默认服务费率 |
